# 运维自动化平台 - 完整项目文档

**版本**: v3.1  
**作者**: 本科毕业设计  
**日期**: 2025-01-15  
**代码量**: 10,500+ 行  
**技术栈**: Python + FastAPI + Vue 3 + Kubernetes

---

## 目录

- [1. 项目概述](#1-项目概述)
- [2. 快速开始](#2-快速开始)
- [3. 核心功能](#3-核心功能)
- [4. 技术架构](#4-技术架构)
- [5. 功能详解](#5-功能详解)
- [6. API 接口文档](#6-api-接口文档)
- [7. 使用指南](#7-使用指南)
- [8. 部署指南](#8-部署指南)
- [9. 开发指南](#9-开发指南)
- [10. 故障排除](#10-故障排除)
- [11. 论文写作参考](#11-论文写作参考)

---

## 1. 项目概述

### 1.1 项目简介

这是一个基于Python开发的**现代化运维自动化管理平台**，旨在简化日常运维工作，提高运维效率。项目涵盖**传统服务器管理**和**Kubernetes容器化平台管理**，实现混合基础设施的统一管理。

### 1.2 项目定位

- **目标用户**: 运维工程师、系统管理员、DevOps团队
- **应用场景**: 多服务器管理、K8s集群管理、自动化运维、监控告警
- **技术水平**: 本科毕业设计优秀水平
- **实用价值**: 可直接部署到生产环境使用

### 1.3 核心特色

✅ **混合基础设施管理** - 传统虚拟机 + 容器化平台统一管理  
✅ **动态告警规则引擎** - 自定义监控指标和通知方式  
✅ **Kubernetes深度集成** - Pod管理、Deployment伸缩、健康度评分  
✅ **现代化技术栈** - FastAPI + Vue 3 + ECharts + Element Plus  
✅ **完整的功能模块** - 6大模块，100+功能点  
✅ **规范的代码质量** - 10,500+行代码，注释完整  

### 1.4 技术栈

#### 后端技术
- **Web框架**: FastAPI 0.109.2
- **ORM**: SQLAlchemy 2.0.36
- **数据库**: SQLite（开发）/ MySQL（生产）
- **SSH操作**: Paramiko 3.4.0
- **K8s客户端**: kubernetes 28.1.0
- **任务调度**: APScheduler 3.10.4
- **认证**: JWT + bcrypt
- **HTTP客户端**: requests 2.31.0

#### 前端技术
- **框架**: Vue 3.4.15
- **UI库**: Element Plus 2.5.4
- **图表**: ECharts 5.6.0
- **图标**: @element-plus/icons-vue 2.3.2
- **路由**: Vue Router 4.2.5
- **状态管理**: Pinia 2.1.7
- **HTTP**: Axios 1.6.5
- **构建**: Vite 5.0.11

### 1.5 项目统计

```
代码规模:
├── 后端代码: ~6,000行
├── 前端代码: ~4,500行
├── 数据库表: 15个
├── API接口: 55+个
├── 前端页面: 12个
├── 文档数量: 13份
└── 总代码量: 10,500+行

功能模块:
├── 资源管理: 服务器 + K8s集群管理
├── 脚本管理: 远程脚本执行
├── 任务调度: Cron定时任务
├── 监控告警: 动态规则 + 多渠道通知
├── 用户管理: JWT认证 + 权限控制
└── 操作日志: 完整审计追踪
```

---

## 2. 快速开始

### 2.1 环境要求

**必需环境**:
- Python 3.13+
- Node.js 18+
- npm 9+

**推荐环境**:
- macOS / Linux / Windows 10+
- 4GB+ 内存
- 20GB+ 磁盘空间

### 2.2 安装步骤

#### 第一步：克隆项目

```bash
git clone https://github.com/wyk-kk/devops-automation-platform.git
cd devops-automation-platform
```

#### 第二步：安装后端依赖

```bash
cd backend
pip install -r requirements.txt
```

如果遇到Python 3.13兼容性问题，关键依赖版本：
```txt
pydantic==2.10.5
pydantic-settings==2.7.1
sqlalchemy==2.0.36
alembic==1.14.0
bcrypt==4.2.1
kubernetes==28.1.0
```

#### 第三步：安装前端依赖

```bash
cd frontend
npm install
```

如果npm安装失败，尝试：
```bash
# 使用国内镜像
npm install --registry=https://registry.npmmirror.com

# 或清除缓存后重试
npm cache clean --force
npm install
```

#### 第四步：启动服务

**启动后端**:
```bash
cd backend
python main.py
```

访问: http://localhost:8000  
API文档: http://localhost:8000/docs

**启动前端**（新终端）:
```bash
cd frontend
npm run dev
```

访问: http://localhost:5173

#### 第五步：登录系统

默认管理员账户：
- **用户名**: `admin`
- **密码**: `admin123`

### 2.3 快速测试

登录后依次测试：

1. **查看仪表盘** → 首页统计数据
2. **添加服务器** → 资源管理 → 添加服务器
3. **创建告警规则** → 告警规则 → 创建规则
4. **添加K8s集群** → 资源管理 → 添加K8s集群（可选）

---

## 3. 核心功能

### 3.1 功能总览

```
运维自动化平台
├── 1. 资源管理 ⭐
│   ├── 服务器管理（SSH连接、资源监控）
│   └── K8s集群管理（多集群、Pod管理、Deployment伸缩）
├── 2. 脚本管理
│   ├── 脚本模板管理
│   ├── 远程执行
│   └── 执行历史
├── 3. 任务调度
│   ├── Cron定时任务
│   ├── 脚本/命令执行
│   └── 任务执行日志
├── 4. 监控告警 ⭐
│   ├── 动态告警规则引擎
│   ├── 多渠道通知（邮件/Webhook）
│   ├── 告警统计与趋势
│   └── K8s指标告警
├── 5. 用户管理
│   ├── JWT认证
│   ├── 角色权限控制
│   └── 用户信息管理
└── 6. 操作日志
    ├── 完整操作记录
    ├── 用户行为追踪
    └── 审计功能
```

### 3.2 功能特点

#### 资源管理

**服务器管理**:
```
✅ SSH远程连接（基于Paramiko）
✅ 实时资源监控（CPU、内存、磁盘）
✅ 连接状态检测
✅ 批量操作支持
```

**Kubernetes集群管理**:
```
✅ 多集群接入（支持3种认证方式）
✅ 集群健康度评分（0-100分）
✅ Node/Pod/Namespace监控
✅ Pod日志查看（实时、容器过滤）
✅ Pod重启功能
✅ Deployment伸缩（Scale Up/Down）
✅ 资源使用趋势图表
```

#### 监控告警

**动态规则引擎**:
```
✅ 自定义监控指标
✅ 灵活阈值条件（>、≥、<、≤、=）
✅ 多级告警（info/warning/error/critical）
✅ 持续时间检测（避免瞬时波动）
✅ 智能静默期（防止重复告警）
```

**多渠道通知**:
```
✅ 邮件通知（HTML模板）
✅ Webhook通知（钉钉/Slack/企业微信）
✅ 通知记录和重试机制
✅ 通知状态追踪
```

**数据可视化**:
```
✅ 实时告警统计卡片
✅ ECharts趋势图表
✅ 按类型/服务器/集群分组
```

---

## 4. 技术架构

### 4.1 系统架构图

```
┌─────────────────────────────────────────────────────────────┐
│                        用户浏览器                             │
│                    (Chrome/Firefox/Safari)                   │
└────────────────────────┬────────────────────────────────────┘
                         │ HTTP/HTTPS
┌────────────────────────▼────────────────────────────────────┐
│                    前端 (Vue 3)                              │
│  ┌──────────┬──────────┬──────────┬──────────┬──────────┐  │
│  │仪表盘    │资源管理  │脚本管理  │任务调度  │告警管理  │  │
│  └──────────┴──────────┴──────────┴──────────┴──────────┘  │
│  Element Plus + ECharts + Pinia + Vue Router               │
└────────────────────────┬────────────────────────────────────┘
                         │ REST API (JSON)
┌────────────────────────▼────────────────────────────────────┐
│                    API网关 (FastAPI)                         │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ JWT认证 │ CORS │ 请求验证 │ 错误处理 │ 日志记录      │  │
│  └──────────────────────────────────────────────────────┘  │
└────────────────────────┬────────────────────────────────────┘
                         │
        ┌────────────────┼────────────────┐
        │                │                │
┌───────▼──────┐ ┌──────▼───────┐ ┌─────▼────────┐
│  服务层       │ │  服务层       │ │  服务层       │
│ ServerService│ │ K8sService   │ │ AlertService │
│ ScriptService│ │ TaskService  │ │ UserService  │
└───────┬──────┘ └──────┬───────┘ └─────┬────────┘
        │                │                │
┌───────▼──────┐ ┌──────▼───────┐ ┌─────▼────────┐
│ SSH客户端    │ │ K8s客户端    │ │ 通知服务     │
│ (Paramiko)   │ │ (kubernetes) │ │ (Email/Hook) │
└───────┬──────┘ └──────┬───────┘ └──────────────┘
        │                │
┌───────▼────────────────▼───────┐
│      数据库 (SQLAlchemy ORM)    │
│         SQLite / MySQL          │
└─────────────────────────────────┘
        │                │
┌───────▼──────┐ ┌──────▼───────┐
│ Linux服务器  │ │ K8s集群      │
│ (SSH)        │ │ (API Server) │
└──────────────┘ └──────────────┘
```

### 4.2 目录结构

```
project_2/
├── backend/                    # 后端代码
│   ├── app/
│   │   ├── api/               # API路由
│   │   │   ├── auth.py        # 认证接口
│   │   │   ├── servers.py     # 服务器管理
│   │   │   ├── kubernetes.py  # K8s管理
│   │   │   ├── scripts.py     # 脚本管理
│   │   │   ├── tasks.py       # 任务调度
│   │   │   ├── alerts.py      # 告警管理
│   │   │   ├── alert_rules.py # 告警规则
│   │   │   └── users.py       # 用户管理
│   │   ├── core/              # 核心配置
│   │   │   ├── config.py      # 配置文件
│   │   │   ├── database.py    # 数据库连接
│   │   │   └── security.py    # 安全认证
│   │   ├── models/            # 数据模型
│   │   │   ├── user.py        # 用户模型
│   │   │   ├── server.py      # 服务器模型
│   │   │   ├── kubernetes.py  # K8s模型（4个表）
│   │   │   ├── script.py      # 脚本模型
│   │   │   ├── task.py        # 任务模型
│   │   │   ├── alert.py       # 告警模型
│   │   │   ├── alert_rule.py  # 告警规则模型（3个表）
│   │   │   └── log.py         # 日志模型
│   │   ├── schemas/           # Pydantic模型
│   │   │   ├── user.py
│   │   │   ├── server.py
│   │   │   ├── kubernetes.py
│   │   │   ├── alert_rule.py
│   │   │   └── ...
│   │   ├── services/          # 业务逻辑
│   │   │   ├── server_service.py
│   │   │   ├── k8s_service.py
│   │   │   ├── alert_rule_service.py
│   │   │   ├── notification_service.py
│   │   │   ├── scheduler_service.py
│   │   │   └── ...
│   │   └── utils/             # 工具类
│   │       ├── ssh_client.py  # SSH客户端
│   │       ├── k8s_client.py  # K8s客户端
│   │       └── dependencies.py
│   ├── main.py                # 应用入口
│   ├── requirements.txt       # Python依赖
│   └── start.sh              # 启动脚本
├── frontend/                  # 前端代码
│   ├── src/
│   │   ├── api/              # API封装
│   │   │   └── index.js
│   │   ├── layouts/          # 布局组件
│   │   │   └── MainLayout.vue
│   │   ├── router/           # 路由配置
│   │   │   └── index.js
│   │   ├── stores/           # 状态管理
│   │   │   └── auth.js
│   │   ├── views/            # 页面组件
│   │   │   ├── Login.vue
│   │   │   ├── Dashboard.vue
│   │   │   ├── Resources.vue
│   │   │   ├── Servers.vue
│   │   │   ├── Scripts.vue
│   │   │   ├── Tasks.vue
│   │   │   ├── Alerts.vue
│   │   │   ├── AlertRules.vue
│   │   │   └── Users.vue
│   │   ├── App.vue
│   │   └── main.js
│   ├── index.html
│   ├── package.json
│   └── vite.config.js
├── docs/                      # 文档目录
│   ├── API_DOCUMENTATION.md
│   ├── USER_MANUAL.md
│   ├── DEPLOYMENT.md
│   ├── DEVELOPMENT.md
│   └── ALERT_RULES_GUIDE.md
├── README.md
├── PROJECT_SUMMARY.md
├── K8S_FEATURE_GUIDE.md
├── K8S_ADVANCED_FEATURES.md
├── FEATURES_SUMMARY.md
├── LICENSE
└── 完整项目文档.md         # 本文档
```

### 4.3 数据库设计

#### 核心数据表（15个）

**用户相关**:
- `users` - 用户表（用户名、密码、角色、状态）

**资源管理**:
- `servers` - 服务器表（IP、端口、凭证、状态）
- `k8s_clusters` - K8s集群表（API Server、认证配置、状态）
- `k8s_nodes` - K8s节点表（节点信息、资源容量）
- `k8s_namespaces` - K8s命名空间表
- `k8s_pods` - K8s Pod表（状态、资源、IP）

**脚本和任务**:
- `scripts` - 脚本表（名称、内容、类型）
- `script_executions` - 脚本执行记录
- `tasks` - 任务表（Cron表达式、状态）
- `task_executions` - 任务执行记录

**监控告警**:
- `alerts` - 告警表（类型、级别、状态、时间）
- `alert_rules` - 告警规则表（指标、阈值、通知配置）
- `alert_notifications` - 告警通知记录
- `alert_silences` - 告警静默记录

**日志**:
- `operation_logs` - 操作日志表

#### ER关系图（简化）

```
users (用户)
  ├─1:N─> servers (创建服务器)
  ├─1:N─> k8s_clusters (创建集群)
  ├─1:N─> alert_rules (创建告警规则)
  └─1:N─> operation_logs (操作日志)

servers (服务器)
  └─1:N─> alerts (触发告警)

k8s_clusters (K8s集群)
  ├─1:N─> k8s_nodes (包含节点)
  ├─1:N─> k8s_namespaces (包含命名空间)
  └─1:N─> k8s_pods (包含Pods)

alert_rules (告警规则)
  ├─1:N─> alerts (触发告警)
  ├─1:N─> alert_notifications (发送通知)
  └─1:N─> alert_silences (静默记录)
```

---

## 5. 功能详解

### 5.1 资源管理

#### 5.1.1 服务器管理

**添加服务器**:
```
1. 点击"资源管理" → "添加服务器"
2. 填写信息:
   - 服务器名称
   - IP地址
   - SSH端口（默认22）
   - 用户名
   - 密码
3. 点击"创建"
4. 系统自动测试连接
```

**监控服务器**:
- **CPU使用率**: 实时百分比，进度条显示
- **内存使用率**: 已用/总量，进度条显示
- **磁盘使用率**: 各分区使用情况
- **连接状态**: 在线/离线自动检测

**批量操作**:
```
支持批量:
- 执行脚本
- 部署应用
- 收集信息
- 关闭服务
```

#### 5.1.2 Kubernetes集群管理

**添加K8s集群**:

方式1：使用Kubeconfig
```bash
# 1. 获取kubeconfig
kubectl config view --raw > cluster-config.yaml

# 2. 在平台添加集群
- 集群名称: production-k8s
- API Server: https://k8s.example.com:6443
- 认证方式: Kubeconfig
- Kubeconfig内容: 粘贴上面的内容
- 环境: prod
```

方式2：使用Token
```bash
# 1. 创建ServiceAccount
kubectl create serviceaccount devops-admin -n kube-system
kubectl create clusterrolebinding devops-admin-binding \
  --clusterrole=cluster-admin \
  --serviceaccount=kube-system:devops-admin

# 2. 获取Token
kubectl -n kube-system create token devops-admin

# 3. 在平台添加
- 认证方式: Token
- Token: 粘贴上面的token
```

**集群健康度评分**:

评分算法:
```python
健康度 = 基础分(70)
       + 节点就绪率 × 20
       + Pod运行率 × 10
       - 告警惩罚（warning×1 + critical×5）

评级标准:
- 90-100: 优秀（绿色）
- 70-89:  良好（黄色）
- 50-69:  需改进（橙色）
- 0-49:   异常（红色）
```

**Pod管理**:

查看Pod日志:
```bash
# API调用
GET /api/k8s/clusters/{cluster_id}/pods/{namespace}/{pod_name}/logs?tail_lines=100

# 响应
{
  "logs": "[2025-01-15 10:30:00] INFO: Application started\n..."
}
```

重启Pod:
```bash
# API调用
DELETE /api/k8s/clusters/{cluster_id}/pods/{namespace}/{pod_name}

# 说明: 删除Pod会触发控制器自动创建新Pod
```

**Deployment伸缩**:

扩容示例:
```bash
# 扩容到5个副本
POST /api/k8s/clusters/{cluster_id}/deployments/{namespace}/{name}/scale?replicas=5

# 应用场景:
- 流量高峰期扩容
- 预发布准备
- 性能测试
```

缩容示例:
```bash
# 缩容到2个副本
POST /api/k8s/clusters/{cluster_id}/deployments/{namespace}/{name}/scale?replicas=2

# 应用场景:
- 流量低峰期节约资源
- 维护窗口
- 成本优化
```

### 5.2 脚本管理

**创建脚本**:
```
1. 点击"脚本管理" → "创建脚本"
2. 填写信息:
   - 脚本名称: 系统巡检
   - 脚本类型: Shell
   - 脚本内容:
     #!/bin/bash
     echo "=== 系统信息 ==="
     uname -a
     echo "=== 磁盘使用 ==="
     df -h
     echo "=== 内存使用 ==="
     free -h
3. 保存
```

**执行脚本**:
```
1. 选择脚本
2. 选择目标服务器（支持多选）
3. 点击"执行"
4. 查看执行结果
```

**查看历史**:
- 执行时间
- 执行服务器
- 执行状态
- 标准输出
- 错误信息

### 5.3 任务调度

**创建定时任务**:
```
1. 点击"任务调度" → "创建任务"
2. 填写信息:
   - 任务名称: 每日备份
   - Cron表达式: 0 2 * * * (每天凌晨2点)
   - 执行类型: 脚本
   - 选择脚本: backup.sh
   - 目标服务器: 数据库服务器
3. 启用任务
```

**Cron表达式说明**:
```
格式: 秒 分 时 日 月 周

示例:
0 0 * * * *    每小时
0 30 9 * * *   每天9:30
0 0 12 * * 1-5 周一到周五中午12点
0 */5 * * * *  每5分钟
```

### 5.4 监控告警

#### 创建告警规则

**CPU告警示例**:
```json
{
  "name": "生产服务器CPU高负载",
  "description": "CPU使用率持续过高",
  "server_id": 1,
  "metric_type": "cpu",
  "threshold_value": 80.0,
  "threshold_operator": "gt",
  "duration": 60,
  "alert_level": "warning",
  "enable_email": true,
  "email_recipients": ["ops@example.com"],
  "silence_duration": 300
}
```

**K8s节点告警示例**:
```json
{
  "name": "K8s节点NotReady告警",
  "metric_type": "k8s_node_status",
  "threshold_value": "NotReady",
  "alert_level": "critical",
  "enable_webhook": true,
  "webhook_url": "https://oapi.dingtalk.com/robot/send?access_token=xxx"
}
```

#### 配置邮件通知

需要在代码中配置SMTP:
```python
# backend/app/services/notification_service.py
smtp_host = "smtp.gmail.com"
smtp_port = 587
smtp_user = "your-email@gmail.com"
smtp_password = "your-app-password"
```

#### 配置Webhook通知

钉钉机器人示例:
```
1. 钉钉群 → 群设置 → 机器人
2. 添加机器人 → 自定义
3. 复制Webhook地址
4. 在告警规则中填入URL
```

### 5.5 用户管理

**创建用户**（管理员操作）:
```
1. 点击"用户管理" → "创建用户"
2. 填写信息:
   - 用户名
   - 邮箱
   - 密码
   - 角色: 管理员/普通用户
3. 保存
```

**权限控制**:
```
管理员权限:
- 所有功能访问权限
- 用户管理
- 系统配置

普通用户权限:
- 查看服务器信息
- 执行脚本（有限）
- 查看告警
- 无法修改系统配置
```

---

## 6. API 接口文档

### 6.1 认证接口

#### 用户登录

```http
POST /api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}

Response:
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer",
  "user": {
    "id": 1,
    "username": "admin",
    "email": "admin@example.com",
    "is_superuser": true
  }
}
```

#### 获取当前用户

```http
GET /api/auth/me
Authorization: Bearer <token>

Response:
{
  "id": 1,
  "username": "admin",
  "email": "admin@example.com",
  "is_superuser": true,
  "is_active": true
}
```

### 6.2 服务器管理接口

#### 获取服务器列表

```http
GET /api/servers
Authorization: Bearer <token>

Response:
[
  {
    "id": 1,
    "name": "web-server-01",
    "ip": "192.168.1.100",
    "port": 22,
    "username": "root",
    "status": "online",
    "cpu_percent": 45.2,
    "memory_percent": 68.5,
    "disk_percent": 72.1
  }
]
```

#### 创建服务器

```http
POST /api/servers
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "web-server-02",
  "ip": "192.168.1.101",
  "port": 22,
  "username": "root",
  "password": "your-password"
}
```

#### 测试连接

```http
POST /api/servers/{server_id}/test-connection
Authorization: Bearer <token>

Response:
{
  "success": true,
  "message": "Connection successful"
}
```

### 6.3 Kubernetes接口

#### 获取K8s集群列表

```http
GET /api/k8s/clusters
Authorization: Bearer <token>

Response:
[
  {
    "id": 1,
    "name": "production-k8s",
    "api_server": "https://k8s.example.com:6443",
    "version": "v1.28.0",
    "node_count": 10,
    "pod_count": 500,
    "namespace_count": 15,
    "status": "connected",
    "environment": "prod"
  }
]
```

#### 创建K8s集群

```http
POST /api/k8s/clusters
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "test-k8s",
  "api_server": "https://test-k8s.example.com:6443",
  "auth_type": "kubeconfig",
  "kubeconfig": "apiVersion: v1\nkind: Config\n...",
  "environment": "test"
}
```

#### 同步集群资源

```http
POST /api/k8s/clusters/{cluster_id}/sync
Authorization: Bearer <token>

Response:
{
  "message": "Sync task started"
}
```

#### 获取Pod列表

```http
GET /api/k8s/clusters/{cluster_id}/pods?namespace=default
Authorization: Bearer <token>

Response:
[
  {
    "pod_name": "nginx-deployment-123",
    "namespace": "default",
    "status": "Running",
    "node_name": "worker-node-01",
    "ready_containers": 1,
    "total_containers": 1,
    "restart_count": 0
  }
]
```

#### 获取Pod日志

```http
GET /api/k8s/clusters/{cluster_id}/pods/{namespace}/{pod_name}/logs?tail_lines=100
Authorization: Bearer <token>

Response:
{
  "logs": "[2025-01-15 10:30:00] INFO: Application started\n[2025-01-15 10:30:01] INFO: Listening on port 8080\n..."
}
```

#### 删除Pod（重启）

```http
DELETE /api/k8s/clusters/{cluster_id}/pods/{namespace}/{pod_name}
Authorization: Bearer <token>

Response:
{
  "message": "Pod deleted successfully"
}
```

#### Deployment伸缩

```http
POST /api/k8s/clusters/{cluster_id}/deployments/{namespace}/{deployment_name}/scale?replicas=5
Authorization: Bearer <token>

Response:
{
  "message": "Deployment scaled to 5 replicas"
}
```

### 6.4 告警规则接口

#### 获取告警规则列表

```http
GET /api/alert-rules
Authorization: Bearer <token>

Response:
[
  {
    "id": 1,
    "name": "CPU高负载告警",
    "metric_type": "cpu",
    "threshold_value": 80.0,
    "threshold_operator": "gt",
    "alert_level": "warning",
    "is_active": true
  }
]
```

#### 创建告警规则

```http
POST /api/alert-rules
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "内存使用率告警",
  "metric_type": "memory",
  "threshold_value": 85.0,
  "threshold_operator": "gt",
  "duration": 60,
  "alert_level": "warning",
  "enable_email": true,
  "email_recipients": ["ops@example.com"],
  "silence_duration": 300
}
```

#### 获取告警统计

```http
GET /api/alert-rules/statistics/overview?days=7
Authorization: Bearer <token>

Response:
{
  "total_alerts": 150,
  "open_alerts": 5,
  "critical_alerts": 2,
  "warning_alerts": 3,
  "alerts_by_type": {
    "cpu": 50,
    "memory": 30,
    "disk": 20
  }
}
```

### 6.5 脚本管理接口

#### 获取脚本列表

```http
GET /api/scripts
Authorization: Bearer <token>
```

#### 创建脚本

```http
POST /api/scripts
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "系统巡检",
  "script_type": "shell",
  "content": "#!/bin/bash\ndf -h\nfree -h"
}
```

#### 执行脚本

```http
POST /api/scripts/{script_id}/execute
Authorization: Bearer <token>
Content-Type: application/json

{
  "server_ids": [1, 2, 3]
}
```

### 6.6 任务调度接口

#### 获取任务列表

```http
GET /api/tasks
Authorization: Bearer <token>
```

#### 创建任务

```http
POST /api/tasks
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "每日备份",
  "cron_expression": "0 2 * * *",
  "task_type": "script",
  "script_id": 1,
  "server_id": 1,
  "is_active": true
}
```

---

## 7. 使用指南

### 7.1 使用场景示例

#### 场景1：监控新服务器

**步骤**:
```
1. 添加服务器
   → 资源管理 → 添加服务器
   → 填写IP、用户名、密码

2. 配置告警规则
   → 告警规则 → 创建规则
   → CPU > 80% 告警
   → 内存 > 85% 告警
   → 磁盘 > 90% 告警

3. 查看仪表盘
   → 首页实时监控
   → 资源使用趋势
```

#### 场景2：批量部署应用

**步骤**:
```
1. 创建部署脚本
   → 脚本管理 → 创建脚本
   → 类型: Shell
   → 内容: 
     #!/bin/bash
     cd /app
     git pull origin main
     docker-compose down
     docker-compose up -d

2. 执行脚本
   → 选择多台服务器
   → 批量执行
   → 查看结果

3. 创建定时任务（可选）
   → 每天自动部署
   → Cron: 0 3 * * *
```

#### 场景3：K8s集群管理

**步骤**:
```
1. 添加K8s集群
   → 资源管理 → 添加K8s集群
   → 粘贴kubeconfig
   → 测试连接

2. 同步集群资源
   → 点击"同步"按钮
   → 获取Node/Pod/Namespace

3. 管理应用
   → 查看Pod日志
   → 重启异常Pod
   → 伸缩Deployment

4. 配置告警
   → 节点NotReady告警
   → Pod异常告警
   → Webhook通知钉钉群
```

### 7.2 最佳实践

#### 服务器管理

✅ **推荐做法**:
```
1. 服务器命名规范
   - web-server-01, web-server-02
   - db-server-prod-01
   - cache-server-test-01

2. 定期检查连接状态
   - 每天查看离线服务器
   - 及时更新密码
   
3. 使用标签分类
   - 环境: prod/test/dev
   - 类型: web/db/cache
```

❌ **避免做法**:
```
1. 不要使用弱密码
2. 不要在密码中使用特殊字符（可能导致连接失败）
3. 不要删除正在使用的服务器
```

#### K8s集群管理

✅ **推荐做法**:
```
1. 按环境分类集群
   - 生产环境单独管理
   - 测试环境可以共享

2. 定期同步资源
   - 每天自动同步一次
   - 大规模集群注意同步时间

3. 使用命名空间隔离
   - 不同应用不同命名空间
   - 便于管理和监控
```

❌ **避免做法**:
```
1. 不要频繁删除Pod（影响服务稳定性）
2. 不要盲目扩容（先评估资源）
3. 不要在生产环境随意测试
```

#### 告警规则

✅ **推荐做法**:
```
1. 分级管理
   - Critical: 立即处理
   - Warning: 24小时内处理
   - Info: 定期review

2. 设置合理阈值
   - CPU: 80% warning, 90% critical
   - 内存: 85% warning, 95% critical
   - 磁盘: 85% warning, 90% critical

3. 静默期设置
   - 避免重复告警
   - 推荐5-10分钟
```

❌ **避免做法**:
```
1. 不要所有规则都设为critical
2. 不要设置过低的阈值（误报多）
3. 不要忘记配置通知方式
```

---

## 8. 部署指南

### 8.1 开发环境部署

已在"快速开始"章节说明，这里不再重复。

### 8.2 生产环境部署

#### 环境准备

```bash
# 服务器要求
- CPU: 4核+
- 内存: 8GB+
- 磁盘: 50GB+
- 系统: CentOS 7+ / Ubuntu 20.04+
```

#### 后端部署

**方式1：直接部署**

```bash
# 1. 安装Python 3.13
sudo yum install python3.13

# 2. 安装依赖
cd backend
pip3.13 install -r requirements.txt

# 3. 配置数据库（MySQL）
# 修改 app/core/config.py
DATABASE_URL = "mysql+pymysql://user:password@localhost/devops_db"

# 4. 初始化数据库
python3.13 main.py  # 首次运行会自动创建表

# 5. 使用Supervisor管理进程
sudo yum install supervisor

# /etc/supervisord.d/devops-backend.ini
[program:devops-backend]
directory=/opt/devops-platform/backend
command=/usr/bin/python3.13 main.py
autostart=true
autorestart=true
user=devops
stdout_logfile=/var/log/devops-backend.log
```

**方式2：Docker部署**

```dockerfile
# Dockerfile
FROM python:3.13-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .
EXPOSE 8000

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

```bash
# 构建镜像
docker build -t devops-backend:v1.0 .

# 运行容器
docker run -d \
  --name devops-backend \
  -p 8000:8000 \
  -v /opt/devops-db:/app/data \
  devops-backend:v1.0
```

#### 前端部署

**方式1：Nginx部署**

```bash
# 1. 构建生产版本
cd frontend
npm run build

# 2. 部署到Nginx
sudo cp -r dist/* /usr/share/nginx/html/

# 3. 配置Nginx
# /etc/nginx/conf.d/devops.conf
server {
    listen 80;
    server_name devops.example.com;

    root /usr/share/nginx/html;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /api {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}

# 4. 重启Nginx
sudo systemctl restart nginx
```

**方式2：Docker部署**

```dockerfile
# Dockerfile
FROM node:18 AS builder
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf
EXPOSE 80
```

### 8.3 域名和SSL配置

```nginx
# HTTPS配置
server {
    listen 443 ssl http2;
    server_name devops.example.com;

    ssl_certificate /etc/letsencrypt/live/devops.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/devops.example.com/privkey.pem;

    # 其他配置同上...
}

# HTTP重定向到HTTPS
server {
    listen 80;
    server_name devops.example.com;
    return 301 https://$server_name$request_uri;
}
```

### 8.4 数据库迁移

```bash
# SQLite → MySQL

# 1. 导出SQLite数据
sqlite3 devops.db .dump > devops_backup.sql

# 2. 修改SQL语法（SQLite → MySQL）
# 将 AUTOINCREMENT 改为 AUTO_INCREMENT
# 调整数据类型

# 3. 导入MySQL
mysql -u root -p devops_db < devops_backup_modified.sql

# 4. 更新配置文件
# app/core/config.py
DATABASE_URL = "mysql+pymysql://root:password@localhost/devops_db"
```

---

## 9. 开发指南

### 9.1 开发环境搭建

```bash
# 1. Fork项目
git clone https://github.com/YOUR_USERNAME/devops-automation-platform.git

# 2. 创建开发分支
git checkout -b feature/my-feature

# 3. 安装开发依赖
cd backend
pip install -r requirements.txt

cd frontend
npm install

# 4. 运行开发服务器
# 后端
python main.py

# 前端
npm run dev
```

### 9.2 添加新功能

#### 后端添加API

**步骤1：创建数据模型**
```python
# backend/app/models/my_model.py
from sqlalchemy import Column, Integer, String
from app.core.database import Base

class MyModel(Base):
    __tablename__ = "my_table"
    
    id = Column(Integer, primary_key=True)
    name = Column(String(200))
```

**步骤2：创建Schema**
```python
# backend/app/schemas/my_schema.py
from pydantic import BaseModel

class MyModelCreate(BaseModel):
    name: str

class MyModel(MyModelCreate):
    id: int
    
    model_config = {"from_attributes": True}
```

**步骤3：创建Service**
```python
# backend/app/services/my_service.py
from sqlalchemy.orm import Session
from app.models.my_model import MyModel

class MyService:
    @staticmethod
    def get_all(db: Session):
        return db.query(MyModel).all()
```

**步骤4：创建API**
```python
# backend/app/api/my_api.py
from fastapi import APIRouter, Depends
from sqlalchemy.orm import Session
from app.core.database import get_db

router = APIRouter(prefix="/my-resource", tags=["My Resource"])

@router.get("")
def get_my_resources(db: Session = Depends(get_db)):
    return MyService.get_all(db)
```

**步骤5：注册路由**
```python
# backend/main.py
from app.api import my_api
app.include_router(my_api.router, prefix="/api")
```

#### 前端添加页面

**步骤1：创建页面组件**
```vue
<!-- frontend/src/views/MyPage.vue -->
<template>
  <div>
    <h1>My Page</h1>
    <el-table :data="data">
      <el-table-column prop="name" label="名称" />
    </el-table>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import api from '@/api'

const data = ref([])

const fetchData = async () => {
  const response = await api.get('/my-resource')
  data.value = response.data
}

onMounted(() => {
  fetchData()
})
</script>
```

**步骤2：添加路由**
```javascript
// frontend/src/router/index.js
{
  path: 'my-page',
  name: 'MyPage',
  component: () => import('@/views/MyPage.vue')
}
```

**步骤3：添加菜单**
```vue
<!-- frontend/src/layouts/MainLayout.vue -->
<el-menu-item index="/my-page">
  <el-icon><Star /></el-icon>
  <span>我的页面</span>
</el-menu-item>
```

### 9.3 代码规范

#### Python代码规范

```python
# 1. 使用类型注解
def get_user(user_id: int) -> Optional[User]:
    pass

# 2. 函数文档字符串
def create_server(server: ServerCreate, user_id: int) -> Server:
    """
    创建服务器
    
    Args:
        server: 服务器创建信息
        user_id: 创建用户ID
        
    Returns:
        Server: 创建的服务器对象
    """
    pass

# 3. 异常处理
try:
    result = do_something()
except SpecificException as e:
    logger.error(f"Operation failed: {str(e)}")
    raise HTTPException(status_code=500, detail=str(e))
```

#### JavaScript代码规范

```javascript
// 1. 使用const/let，不使用var
const data = ref([])
let loading = false

// 2. 函数命名
const fetchServerList = async () => {
  // 动词开头，驼峰命名
}

// 3. 组件命名
// 文件名: MyComponent.vue
// 组件名: MyComponent（PascalCase）
```

### 9.4 测试

#### 后端测试

```python
# tests/test_servers.py
import pytest
from fastapi.testclient import TestClient
from main import app

client = TestClient(app)

def test_get_servers():
    response = client.get("/api/servers")
    assert response.status_code == 200
    assert isinstance(response.json(), list)
```

#### 前端测试

```javascript
// tests/unit/MyComponent.spec.js
import { mount } from '@vue/test-utils'
import MyComponent from '@/components/MyComponent.vue'

describe('MyComponent', () => {
  it('renders properly', () => {
    const wrapper = mount(MyComponent)
    expect(wrapper.text()).toContain('Expected Text')
  })
})
```

---

## 10. 故障排除

### 10.1 常见问题

#### 问题1：后端启动失败

**错误**: `ModuleNotFoundError: No module named 'pydantic_core'`

**原因**: Python 3.13版本兼容性问题

**解决**:
```bash
pip install pydantic==2.10.5 pydantic-settings==2.7.1
```

#### 问题2：前端页面空白

**原因**: API请求失败或路由配置错误

**排查步骤**:
```bash
# 1. 检查浏览器控制台
F12 → Console → 查看错误信息

# 2. 检查网络请求
F12 → Network → 查看API请求状态

# 3. 检查后端是否运行
curl http://localhost:8000/api/health
```

#### 问题3：无法连接服务器

**错误**: `Authentication failed`

**可能原因**:
1. SSH端口错误
2. 用户名密码错误
3. 服务器SSH服务未启动
4. 防火墙阻止

**解决**:
```bash
# 1. 测试SSH连接
ssh user@server-ip -p 22

# 2. 检查SSH服务
systemctl status sshd

# 3. 检查防火墙
sudo firewall-cmd --list-all
```

#### 问题4：K8s集群连接失败

**错误**: `Failed to connect to cluster`

**可能原因**:
1. kubeconfig配置错误
2. API Server地址不可达
3. 证书过期
4. Token无效

**解决**:
```bash
# 1. 验证kubeconfig
kubectl --kubeconfig=/path/to/config get nodes

# 2. 测试API Server连接
curl -k https://k8s-api-server:6443

# 3. 检查Token有效性
kubectl --token=YOUR_TOKEN get nodes
```

#### 问题5：告警不触发

**可能原因**:
1. 规则未启用
2. 阈值设置不合理
3. 在静默期内
4. 监控数据未采集

**排查**:
```sql
# 检查告警规则
SELECT * FROM alert_rules WHERE is_active = 1;

# 检查静默记录
SELECT * FROM alert_silences WHERE silence_until > NOW();

# 检查服务器状态
SELECT * FROM servers WHERE status = 'online';
```

### 10.2 日志查看

#### 后端日志

```bash
# 开发环境
# 终端输出

# 生产环境（Supervisor）
tail -f /var/log/devops-backend.log

# 生产环境（Docker）
docker logs -f devops-backend
```

#### 前端日志

```javascript
// 浏览器控制台
// F12 → Console

// Vite开发服务器日志
// 终端输出
```

#### 数据库日志

```bash
# SQLite
# 无独立日志文件

# MySQL
tail -f /var/log/mysql/error.log
```

### 10.3 性能优化

#### 数据库优化

```sql
# 添加索引
CREATE INDEX idx_server_status ON servers(status);
CREATE INDEX idx_alert_time ON alerts(triggered_at);
CREATE INDEX idx_k8s_cluster ON k8s_pods(cluster_id);

# 清理历史数据
DELETE FROM alerts WHERE triggered_at < DATE_SUB(NOW(), INTERVAL 30 DAY);
DELETE FROM operation_logs WHERE created_at < DATE_SUB(NOW(), INTERVAL 90 DAY);
```

#### API优化

```python
# 使用分页
@router.get("/servers")
def get_servers(skip: int = 0, limit: int = 100):
    return db.query(Server).offset(skip).limit(limit).all()

# 使用缓存（可选）
from functools import lru_cache

@lru_cache(maxsize=100)
def get_server_info(server_id: int):
    return db.query(Server).filter(Server.id == server_id).first()
```

#### 前端优化

```vue
<!-- 使用v-if而不是v-show（大量数据） -->
<el-table-column v-if="showColumn">

<!-- 图片懒加载 -->
<el-image lazy :src="imageUrl">

<!-- 虚拟滚动（大列表） -->
<el-table :virtual-scroll="true">
```

---

## 11. 论文写作参考

### 11.1 论文结构建议

```
第一章：绪论
  1.1 研究背景与意义
  1.2 国内外研究现状
  1.3 研究内容与目标
  1.4 论文组织结构

第二章：系统需求分析
  2.1 需求分析
      2.1.1 功能需求
      2.1.2 非功能需求
  2.2 可行性分析
      2.2.1 技术可行性
      2.2.2 经济可行性
      2.2.3 操作可行性

第三章：关键技术研究
  3.1 FastAPI框架
  3.2 Vue 3前端框架
  3.3 Kubernetes Python SDK
  3.4 动态告警规则引擎设计
  3.5 健康度评分算法

第四章：系统设计
  4.1 总体架构设计
  4.2 数据库设计
  4.3 接口设计
  4.4 核心算法设计
      4.4.1 健康度评分算法
      4.4.2 告警规则匹配算法
      4.4.3 资源监控算法

第五章：系统实现
  5.1 开发环境
  5.2 资源管理模块实现
  5.3 监控告警模块实现
  5.4 Kubernetes集群管理实现
  5.5 关键代码展示

第六章：系统测试
  6.1 测试环境
  6.2 功能测试
  6.3 性能测试
  6.4 测试结果分析

第七章：总结与展望
  7.1 工作总结
  7.2 创新点总结
  7.3 不足与展望
```

### 11.2 技术创新点

#### 创新点1：混合基础设施统一管理

**描述**:
传统运维工具往往只支持虚拟机管理或只支持容器管理，本系统实现了传统服务器和Kubernetes集群的统一管理，打破了基础设施管理的边界。

**技术实现**:
- 统一的API接口设计
- 抽象的资源管理层
- 统一的监控告警系统

**论文价值**:
- 提出了混合基础设施管理模型
- 设计了统一的资源抽象层
- 实现了跨平台的监控方案

#### 创新点2：动态告警规则引擎

**描述**:
传统告警系统使用固定阈值，本系统设计了动态规则引擎，支持用户自定义监控指标、阈值条件和通知方式。

**技术实现**:
```python
# 规则匹配算法
def match_rule(value, threshold, operator):
    operators = {
        'gt': lambda v, t: v > t,
        'gte': lambda v, t: v >= t,
        'lt': lambda v, t: v < t,
        'lte': lambda v, t: v <= t,
        'eq': lambda v, t: abs(v - t) < 0.001
    }
    return operators[operator](value, threshold)

# 静默机制
def is_silenced(rule_id, server_id):
    silence = get_silence(rule_id, server_id)
    return silence and silence.silence_until > now()
```

**论文价值**:
- 设计了灵活的规则表达式
- 实现了智能静默算法
- 支持多种通知渠道

#### 创新点3：Kubernetes健康度评分系统

**描述**:
提出了量化集群健康状况的评分模型，综合考虑节点状态、Pod运行情况和告警数量，自动计算健康度分数（0-100分）。

**评分模型**:
```python
def calculate_health_score(cluster):
    """
    健康度评分算法
    
    Args:
        cluster: 集群对象
        
    Returns:
        int: 健康度分数（0-100）
    """
    base_score = 70  # 基础分
    
    # 节点就绪率得分（最高20分）
    ready_nodes = count_ready_nodes(cluster)
    node_score = (ready_nodes / cluster.total_nodes) * 20
    
    # Pod运行率得分（最高10分）
    running_pods = count_running_pods(cluster)
    pod_score = (running_pods / cluster.total_pods) * 10
    
    # 告警惩罚
    warning_penalty = cluster.warning_alerts * 1
    critical_penalty = cluster.critical_alerts * 5
    
    final_score = base_score + node_score + pod_score
    final_score -= (warning_penalty + critical_penalty)
    
    return max(0, min(100, final_score))
```

**论文价值**:
- 提出了量化健康度的方法
- 设计了综合评分算法
- 实现了自动化评估系统

### 11.3 论文数据支撑

#### 代码量统计

```
总代码行数: 10,500+
- 后端Python代码: 6,000行
- 前端Vue代码: 4,500行
- 配置文件: 200行
- 文档: 13份

文件数量: 80+
- 后端文件: 30+
- 前端文件: 35+
- 文档文件: 13
- 配置文件: 10+

数据库设计:
- 数据表: 15个
- 关系: 20+个外键关系
- 索引: 30+个

API接口: 55+个
- 认证: 3个
- 服务器: 10个
- K8s: 15个
- 脚本: 8个
- 任务: 8个
- 告警: 15个
```

#### 功能模块统计

```
核心模块数: 6个
- 资源管理
- 脚本管理
- 任务调度
- 监控告警
- 用户管理
- 操作日志

功能点数: 100+
子功能: 200+
```

#### 技术栈统计

```
使用的技术: 20+种
- 编程语言: 2种（Python、JavaScript）
- 框架: 4种（FastAPI、Vue、SQLAlchemy、Element Plus）
- 工具库: 15+种
```

### 11.4 论文截图建议

建议论文中包含以下截图：

1. **系统架构图** - 展示分层设计
2. **数据库ER图** - 展示数据模型
3. **主界面截图** - 仪表盘
4. **资源管理界面** - 服务器和K8s列表
5. **告警规则界面** - 规则配置表单
6. **告警统计图表** - ECharts可视化
7. **K8s集群详情** - 健康度评分
8. **API文档截图** - Swagger UI

### 11.5 论文关键字

```
中文关键字:
运维自动化, Kubernetes, 监控告警, FastAPI, Vue.js, 
容器编排, 混合基础设施, 健康度评分

English Keywords:
DevOps Automation, Kubernetes, Monitoring and Alerting, 
FastAPI, Vue.js, Container Orchestration, 
Hybrid Infrastructure, Health Score
```

---

## 附录

### 附录A：默认配置

```python
# backend/app/core/config.py

# 应用配置
PROJECT_NAME = "运维自动化平台"
VERSION = "3.1.0"
DEBUG = True
HOST = "0.0.0.0"
PORT = 8000

# 数据库配置
DATABASE_URL = "sqlite:///./devops.db"

# 安全配置
SECRET_KEY = "your-secret-key-here"
ALGORITHM = "HS256"
ACCESS_TOKEN_EXPIRE_MINUTES = 1440  # 24小时

# 管理员配置
ADMIN_USERNAME = "admin"
ADMIN_EMAIL = "admin@example.com"
ADMIN_PASSWORD = "admin123"

# CORS配置
CORS_ORIGINS = [
    "http://localhost:5173",
    "http://127.0.0.1:5173"
]
```

### 附录B：数据库Schema

```sql
-- 用户表
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    hashed_password VARCHAR(255) NOT NULL,
    is_active BOOLEAN DEFAULT 1,
    is_superuser BOOLEAN DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 服务器表
CREATE TABLE servers (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(200) NOT NULL,
    ip VARCHAR(100) NOT NULL,
    port INTEGER DEFAULT 22,
    username VARCHAR(100) NOT NULL,
    password VARCHAR(255) NOT NULL,
    status VARCHAR(20) DEFAULT 'unknown',
    cpu_percent FLOAT,
    memory_percent FLOAT,
    disk_percent FLOAT,
    created_by INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (created_by) REFERENCES users (id)
);

-- K8s集群表
CREATE TABLE k8s_clusters (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(200) UNIQUE NOT NULL,
    api_server VARCHAR(500) NOT NULL,
    auth_type VARCHAR(50) DEFAULT 'kubeconfig',
    kubeconfig TEXT,
    token TEXT,
    version VARCHAR(50),
    node_count INTEGER DEFAULT 0,
    pod_count INTEGER DEFAULT 0,
    namespace_count INTEGER DEFAULT 0,
    status VARCHAR(20) DEFAULT 'unknown',
    environment VARCHAR(50),
    created_by INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (created_by) REFERENCES users (id)
);

-- 告警规则表
CREATE TABLE alert_rules (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(200) NOT NULL,
    server_id INTEGER,
    metric_type VARCHAR(50) NOT NULL,
    threshold_value FLOAT NOT NULL,
    threshold_operator VARCHAR(10) DEFAULT 'gt',
    alert_level VARCHAR(20) DEFAULT 'warning',
    enable_email BOOLEAN DEFAULT 0,
    email_recipients JSON,
    enable_webhook BOOLEAN DEFAULT 0,
    webhook_url VARCHAR(500),
    silence_duration INTEGER DEFAULT 300,
    is_active BOOLEAN DEFAULT 1,
    created_by INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (server_id) REFERENCES servers (id),
    FOREIGN KEY (created_by) REFERENCES users (id)
);
```

### 附录C：快捷命令

```bash
# 后端
cd backend
pip install -r requirements.txt  # 安装依赖
python main.py                    # 启动服务
python -m pytest                  # 运行测试

# 前端
cd frontend
npm install                       # 安装依赖
npm run dev                       # 开发模式
npm run build                     # 生产构建
npm run preview                   # 预览构建结果

# Git
git add .                         # 添加更改
git commit -m "message"           # 提交
git push                          # 推送

# Docker
docker build -t devops-backend .  # 构建镜像
docker run -d -p 8000:8000 devops-backend  # 运行容器
docker logs -f container_name     # 查看日志
```

---

## 版权声明

本项目采用 MIT 许可证。

```
MIT License

Copyright (c) 2025 运维自动化平台

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

## 联系方式

- **项目地址**: https://github.com/wyk-kk/devops-automation-platform
- **问题反馈**: GitHub Issues
- **文档更新**: 2025-01-15

---

**文档版本**: v3.1  
**适用版本**: 运维自动化平台 v3.1  
**总页数**: 本文档  
**最后更新**: 2025-01-15

